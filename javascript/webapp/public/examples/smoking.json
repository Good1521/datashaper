{
	"name": "Smoking",
	"resources": [
		{
			"name": "nhefs",
			"profile": "tablebundle",
			"metadata": {
				"source": "https://www.hsph.harvard.edu/miguel-hernan/causal-inference-book/",
				"citation": "Hern√°n MA, Robins JM (2020). Causal Inference: What If. Boca Raton: Chapman & Hall/CRC"
			},
			"sources": [
				{
					"rel": "input",
					"source": {
						"profile": "datatable",
						"path": "https://cdn1.sph.harvard.edu/wp-content/uploads/sites/1268/1268/20/nhefs.csv"
					}
				},
				{
					"rel": "codebook",
					"source": {
						"$schema": "https://microsoft.github.io/datashaper/schema/codebook/v1.0.0.json",
						"id": "2f96dd43-db18-4513-87c3-53e46a2c354b",
						"name": "codebook.json",
						"profile": "codebook",
						"sources": [],
						"fields": [
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "seqn",
								"type": "number",
								"nature": "discrete"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "qsmk",
								"type": "number",
								"nature": "binary"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "death",
								"type": "number",
								"nature": "binary"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "yrdth",
								"type": "number",
								"nature": "discrete"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "modth",
								"type": "number",
								"nature": "discrete"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "dadth",
								"type": "number",
								"nature": "discrete"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "sbp",
								"type": "number",
								"nature": "discrete"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "dbp",
								"type": "number",
								"nature": "discrete"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "sex",
								"mapping": {
									"0": "Male",
									"1": "Female"
								}
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "age",
								"type": "number",
								"nature": "discrete"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "race",
								"type": "number",
								"nature": "binary"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "income",
								"type": "number",
								"nature": "discrete"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "marital",
								"type": "number",
								"nature": "discrete"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "school",
								"type": "number",
								"nature": "discrete"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "education",
								"type": "number",
								"nature": "discrete"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "ht",
								"type": "number",
								"nature": "continuous"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "wt71",
								"type": "number",
								"nature": "continuous"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "wt82",
								"type": "number",
								"nature": "continuous"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "wt82_71",
								"type": "number",
								"nature": "continuous"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "birthplace",
								"type": "number",
								"nature": "discrete"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "smokeintensity",
								"type": "number",
								"nature": "discrete"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "smkintensity82_71",
								"type": "number",
								"nature": "discrete"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "smokeyrs",
								"type": "number",
								"nature": "discrete"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "asthma",
								"type": "number",
								"nature": "binary"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "bronch",
								"type": "number",
								"nature": "binary"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "tb",
								"type": "number",
								"nature": "binary"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "hf",
								"type": "number",
								"nature": "binary"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "hbp",
								"type": "number",
								"nature": "discrete"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "pepticulcer",
								"type": "number",
								"nature": "binary"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "colitis",
								"type": "number",
								"nature": "binary"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "hepatitis",
								"type": "number",
								"nature": "binary"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "chroniccough",
								"type": "number",
								"nature": "binary"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "hayfever",
								"type": "number",
								"nature": "binary"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "diabetes",
								"type": "number",
								"nature": "discrete"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "polio",
								"type": "number",
								"nature": "binary"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "tumor",
								"type": "number",
								"nature": "binary"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "nervousbreak",
								"type": "number",
								"nature": "binary"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "alcoholpy",
								"type": "number",
								"nature": "discrete"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "alcoholfreq",
								"type": "number",
								"nature": "discrete"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "alcoholtype",
								"type": "number",
								"nature": "discrete"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "alcoholhowmuch",
								"type": "number",
								"nature": "discrete"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "pica",
								"type": "number",
								"nature": "ordinal"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "headache",
								"type": "number",
								"nature": "binary"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "otherpain",
								"type": "number",
								"nature": "binary"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "weakheart",
								"type": "number",
								"nature": "binary"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "allergies",
								"type": "number",
								"nature": "binary"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "nerves",
								"type": "number",
								"nature": "binary"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "lackpep",
								"type": "number",
								"nature": "binary"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "hbpmed",
								"type": "number",
								"nature": "discrete"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "boweltrouble",
								"type": "number",
								"nature": "ordinal"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "wtloss",
								"type": "number",
								"nature": "binary"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "infection",
								"type": "number",
								"nature": "binary"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "active",
								"type": "number",
								"nature": "ordinal"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "exercise",
								"type": "number",
								"nature": "discrete"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "birthcontrol",
								"type": "number",
								"nature": "discrete"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "pregnancies",
								"type": "number",
								"nature": "discrete"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "cholesterol",
								"type": "number",
								"nature": "discrete"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "hightax82",
								"type": "number",
								"nature": "binary"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "price71",
								"type": "number",
								"nature": "continuous"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "price82",
								"type": "number",
								"nature": "continuous"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "tax71",
								"type": "number",
								"nature": "continuous"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "tax82",
								"type": "number",
								"nature": "continuous"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "price71_82",
								"type": "number",
								"nature": "continuous"
							},
							{
								"id": "http://json-schema.org/draft-07/schema#",
								"name": "tax71_82",
								"type": "number",
								"nature": "continuous"
							}
						]
					}
				}
			]
		},
		{
			"name": "nhefs-exposure",
			"profile": "tablebundle",
			"sources": [
				{
					"rel": "workflow",
					"source": {
						"profile": "workflow",
						"input": [
							"nhefs"
						],
						"steps": [
							{
								"verb": "window",
								"args": {
									"operation": "row_number",
									"to": "index"
								},
								"input": {
									"source": "nhefs"
								}
							},
							{
								"args": {
									"columns": [
										"index",
										"sex",
										"age",
										"race",
										"education",
										"wt71",
										"wt82_71",
										"smokeintensity",
										"smkintensity82_71",
										"active",
										"exercise",
										"smokeyrs"
									]
								},
								"verb": "select"
							},
							{
								"verb": "rename",
								"args": {
									"columns": {
										"wt71": "weight_1971",
										"wt82_71": "weight_change",
										"smokeintensity": "smoke_intensity_1971",
										"smkintensity82_71": "smoke_intensity_change",
										"smokeyrs": "smoke_years"
									}
								}
							},
							{
								"verb": "derive",
								"args": {
									"to": "smoke_intensity_change_pct",
									"column1": "smoke_intensity_change",
									"operator": "/",
									"column2": "smoke_intensity_1971"
								}
							},
							{
								"verb": "binarize",
								"args": {
									"to": "smoke_reduction_25pct",
									"column": "smoke_intensity_change_pct",
									"criteria": [
										{
											"operator": "<=",
											"type": "value",
											"value": "-0.25"
										}
									]
								}
							},
							{
								"verb": "binarize",
								"args": {
									"to": "smoke_reduction_50pct",
									"column": "smoke_intensity_change_pct",
									"criteria": [
										{
											"operator": "<=",
											"type": "value",
											"value": "-0.5"
										}
									]
								}
							},
							{
								"verb": "binarize",
								"args": {
									"to": "smoke_reduction_75pct",
									"column": "smoke_intensity_change_pct",
									"criteria": [
										{
											"operator": "<=",
											"type": "value",
											"value": "-0.75"
										}
									]
								}
							},
							{
								"verb": "binarize",
								"args": {
									"to": "quit_smoking",
									"column": "smoke_intensity_change_pct",
									"criteria": [
										{
											"operator": "=",
											"type": "value",
											"value": "-1"
										}
									]
								}
							},
							{
								"verb": "binarize",
								"args": {
									"to": "subject_inclusion",
									"column": "weight_change",
									"criteria": [
										{
											"operator": "is not empty"
										}
									]
								}
							},
							{
								"verb": "convert",
								"args": {
									"type": "float",
									"formatPattern": "%Y-%m-%d",
									"columns": [
										"weight_change"
									]
								}
							}
						]
					}
				}
			]
		},
		{
			"name": "nhefs-discovery",
			"profile": "tablebundle",
			"sources": [
				{
					"rel": "workflow",
					"source": {
						"profile": "workflow",
						"input": [
							"nhefs"
						],
						"steps": [
							{
								"verb": "erase",
								"description": "Maps several columns' null code of 2 to actual nulls",
								"args": {
									"columns": [
										"birthcontrol",
										"boweltrouble",
										"diabetes",
										"hbp",
										"hbpmed"
									],
									"value": 2
								},
								"input": {
									"source": "nhefs"
								}
							},
							{
								"verb": "select",
								"args": {
									"columns": [
										"active",
										"age",
										"alcoholfreq",
										"alcoholhowmuch",
										"alcoholtype",
										"allergies",
										"asthma",
										"birthcontrol",
										"boweltrouble",
										"bronch",
										"cholesterol",
										"chroniccough",
										"colitis",
										"dbp",
										"death",
										"diabetes",
										"education",
										"exercise",
										"hayfever",
										"hbp",
										"hbpmed",
										"headache",
										"hepatitis",
										"hf",
										"hightax82",
										"ht",
										"income",
										"infection",
										"lackpep",
										"marital",
										"nerves",
										"nervousbreak",
										"otherpain",
										"pepticulcer",
										"pica",
										"polio",
										"pregnancies",
										"price71",
										"price71_82",
										"price82",
										"qsmk",
										"sbp",
										"school",
										"sex",
										"smkintensity82_71",
										"smokeintensity",
										"smokeyrs",
										"tax71",
										"tax71_82",
										"tax82",
										"tb",
										"tumor",
										"weakheart",
										"wt71",
										"wt82",
										"wt82_71",
										"wtloss"
									]
								}
							}
						]
					}
				}
			]
		},
		{
			"name": "california-prop99",
			"profile": "tablebundle",
			"metadata": {
				"source": "https://www.openicpsr.org/openicpsr/project/146381/version/V1/view?path=/openicpsr/146381/fcr:versions/V1/synthdid-sdid-paper/data/california_prop99.csv",
				"citation": " Dmitry Arkhangelsky, CEMFI; Susan Athey, Stanford University; David A. Hirshberg, Emory University; Guido W. Imbens, Stanford University; Stefan Wager, Stanford University"
			},
			"sources": [
				{
					"rel": "input",
					"source": {
						"profile": "datatable",
						"path": "https://cdn.jsdelivr.net/gh/synth-inference/synthdid@master/data/california_prop99.csv",
						"parser": {
							"delimiter": ";"
						}
					}
				}
			]
		}
	]
}